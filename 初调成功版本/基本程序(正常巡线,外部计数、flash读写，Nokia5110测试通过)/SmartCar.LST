C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE SMARTCAR
OBJECT MODULE PLACED IN SmartCar.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE SmartCar.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //¾§Õñ 12MHz 1TÄ£Ê½  ×ÜÏßÆµÂÊ12MHz£¬Ò»¸öÖ¸Áî1/12us
   2          #include "STC12C5A60S2.H"      //STC12C5A60S2µÄÍ·ÎÄ¼þ
   3          #include "nokia_5110.h"
   4          #include "key.h"
   5          #include "flash.h"
   6          //#define uchar unsigned char    //ºê¶¨Òå
   7          #define uint unsigned int
   8          
   9          #define T0_HIGH      0xff   //T0¼ÆÊ±Æ÷¼Ä´æÆ÷³õÖµ
  10          #define T0_LOW      0x83 //Òç³ö¼ÆÊý160¸ö£¬160*£¨1/16£©¶¨Ê±ÖÜÆÚ10us
  11                                      //ÎªÁË±£Ö¤Ö÷³ÌÐòÕý³£ÔËÐÐ£¬¶¨Ê±Æ÷¼ÆÊý×îºÃ²»ÒªÐ¡ÓÚ80¸ö
  12          
  13          #define MOTOR_MAX_PWM_COUNT  100 //PWM¼ÆÊýÆ÷×î´óÖµ 10us*100=1ms,1000Hz
  14          #define SERVO_MAX_PWM_COUNT  1010//1000=20ms,50HZ //¶æ»ú¿ØÖÆ¸ßµçÆ½0.5~2.5ms¶ÔÓ¦PWMµÄ50~250
  15                                           //¶æ»ú¿ØÖÆÆµÂÊÔÚ50~100HzÖ®¼ä£¬ÕâÀïÑ¡50Hz
  16          
  17                                        //×¢Òâ£¬¶æ»ú´ò½Ç¹ý´ó»á´òÔÚµ×ÅÌÉÏ£¬ÇëÁ¢¼´¶Ïµç£¬ÒÔÃâËðº¦¶æ»ú
  18          
  19          #define ERROR_HISTORY_NUM 5   //ÀúÊ·Æ«²î¼ÇÂ¼¸öÊý
  20          
  21          
  22          sbit LEFT_MOTOR_PWM_PORT=P3^7; // µç»úPWM¿ØÖÆ¶Ë¿Ú
  23          sbit RIGHT_MOTOR_PWM_PORT=P3^6;
  24          //       sbit LEFT_MOTOR_PWM_PORT=P3^1; // µç»úPWM¿ØÖÆ¶Ë¿Ú
  25           //    sbit RIGHT_MOTOR_PWM_PORT=P3^0;
  26          sbit SERVO_PWM_PORT=P3^5;   //¶æ»úPWM¿ØÖÆ¶Ë¿Ú
  27          
  28          
  29          
  30          bit control_period_finished=0; //¿ØÖÆÖÜÆÚ½áÊø±êÖ¾Î»£¬¿ØÖÆÖÜÆÚÑ¡Ôñ20ms
  31                                         //Ò²¿É×Ô¼ºÈ·¶¨¿ØÖÆÖÜÆÚ£¬µ«ÊÇÒª±£Ö¤Ö÷³ÌÐòÔÚ¿ØÖÆÖÜÆÚÄÚ¿ÉÒÔÔËÐÐÍê
  32          
  33          char motor_PWM_counter=0;//Éú³Éµç»úPWMµÄ¼ÆÊýÆ÷
  34          char left_motor_PWM=0;   //×óÓÒµç»úµÄPWMÕ¼¿Õ±È //ÓÉÓÚÊýÖµÔÚ128ÒÔÄÚ£¬ËùÒÔ¶¨ÒåÎªchar
  35          char right_motor_PWM=0;
  36           //char left_motor_PWM=50;   //×óÓÒµç»úµÄPWMÕ¼¿Õ±È //ÓÉÓÚÊýÖµÔÚ128ÒÔÄÚ£¬ËùÒÔ¶¨ÒåÎªchar
  37          //char right_motor_PWM=50;
  38          
  39          int servo_PWM_counter=0;//Éú³É¶æ»úPWMµÄ¼ÆÊýÆ÷
  40          int servo_PWM=0;//¶æ»úPWM //³¬¹ýcharÐÍ±äÁ¿µÄ·¶Î§
  41          //unsigned char servo_middle=130;
  42                                    unsigned char servo_middle=135;         //µ÷Õâ¸ö¿ÉÒÔ¸Ä±ä¶æ»úÆäÍ£Ö¹Ê±µÄ½Ç¶È¡£
  43          
  44          int P2H=0;
  45          sbit end=P1^3;
  46          
  47          int error=0;    //±¾´ÎÆ«²î
  48          int error_history[ERROR_HISTORY_NUM]={0};  //ÀúÊ·Æ«²î
  49          
  50          unsigned char servo_P=28;   //PIDÏµÊý
  51          unsigned char servo_D=55 ;
  52                                                                                                                                                                                                                            
  53          char speed_expect=80;  //¸ø¶¨ËÙ¶È
  54          
  55          int timecount=0;
C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 2   

  56          int frequent=0;
  57          int T0count=0;
  58          int T1count=0;
  59          
  60          int count=0;
  61          int temp=0;
  62          int worse=0;                                    //°Ñworse¼Ó´ó!!!!!
  63          
  64          int SUM=0;
  65          
  66          void sys_init(void)    //ÏµÍ³³õÊ¼»¯
  67          {
  68   1      //ÈôflashÒÑ¾­ÓÐÊý¾ÝÇÒ²»Îª0xff,½«ÉÏ´ÎÐÞ¸Ä²ÎÊýµÄÊý¾Ý¸³¸øÏàÓ¦±äÁ¿£¬±ÜÃâÊ×´ÎflashÀïÃæÎÞÊý¾Ý
  69   1      if(read(0x00,0x00)!=255) servo_P=read(0x00,0x00);//     servo_P´æ´¢µØÖ·
  70   1      if(read(0x00,0x01)!=255) servo_D=read(0x00,0x01);//     servo_D´æ´¢µØÖ·
  71   1      if(read(0x00,0x02)!=255) servo_middle=read(0x00,0x02);//servo_middle´æ´¢µØÖ·
  72   1      
  73   1              //------IO¿ÚÉèÖÃ------------
  74   1          P0M1=0x00;  //ÍÆÍìÊä³ö
  75   1          P0M0=0xff;
  76   1          P0=0xff;   
  77   1      
  78   1          P1M1=0x00; //×¼Ë«Ïò¿Ú
  79   1          P1M0=0x00;
  80   1          P1=0xff; //³õÊ¼»¯Îª¸ßµçÆ½ 
  81   1              
  82   1              P2M1=0x00;//Ö¸Ê¾µÆ£¬ÉèÖÃÎªÊä³ö
  83   1          P2M0=0x00;
  84   1          P2=0xff;
  85   1      
  86   1          P3M1=0x00;//P3¿Ú¸ßËÄÎ»ÉèÎªÍÆÍìÊä³ö²úÉúPWM£¬µÍËÄÎ»ÉèÖÃ³É×¼Ë«Ïò¿Ú£¬ÓÃÒÔÍâ²¿ÖÐ¶ÏÂö³å¼ÆÊý
  87   1          P3M0=0xf0;
  88   1              P3=0x0f;
  89   1      
  90   1          LEFT_MOTOR_PWM_PORT=0; //PWM¿ÚÉèÎªµÍµçÆ½£¬µç»ú²»×ª
  91   1          RIGHT_MOTOR_PWM_PORT=0;
  92   1          //left_motor_PWM=0;    //Õ¼¿Õ±ÈÉèÖÃÎª0
  93   1          //right_motor_PWM=0;
  94   1              left_motor_PWM=80;    //Õ¼¿Õ±ÈÉèÖÃÎª0
  95   1          right_motor_PWM=80;
  96   1          servo_PWM=servo_middle;//¶æ»ú´ò½Çµ½ÖÐÐÄ
  97   1      
  98   1          //------¶¨Ê±Æ÷ÉèÖÃ------------
  99   1          AUXR=AUXR | 0x80; //¶¨Ê±Æ÷0²»·ÖÆµ
 100   1          TMOD=0x11;        //¶¨Ê±Æ÷·½Ê½1
 101   1          TH0=T0_HIGH;      //¶¨Ê±Æ÷¸³³õÖµ
 102   1          TL0=T0_LOW ;
 103   1       /*****************ÈôÃ»ÓÐËÙ¶È±Õ»·£¬±¾²¿·Ö¿ÉÒÔ×¢ÊÍµô*********************/
 104   1       /*
 105   1       //¿ªÆôÁ½Â·Íâ²¿ÖÐ¶Ï£¬ÓÃÓÚ±àÂëÆ÷Âö³å¼ÆÊý
 106   1          IT0=1;//ÏÂ½µÑØ´¥·¢
 107   1              EX0=1; 
 108   1              IT1=1;//ÏÂ½µÑØ´¥·¢
 109   1              EX1=1;
 110   1              IPH=0x04;
 111   1              IP=0x04;//PX1=1;//½«Íâ²¿ÖÐ¶Ï1ÓÅÏÈ¼¶ÉèÎª×î¸ß
 112   1              */                                                                                              //ÎÒÃ»ÓÐ±àÂëÆ÷£¬ËùÒÔ×¢ÊÍµô
 113   1      /**********************±¾²¿·ÖÒà¿É²ÉÓÃSTC12×Ô´øÁ½Â·Ó²¼þÂö³å²¶×½¹¦ÄÜÊµÏÖ£¬²ÎÕÕCCAPM0\CCAPM1*****************
             -******************************/   
 114   1              TR0=1;      //¶¨Ê±Æ÷ÔËÐÐ
 115   1          ET0=1;      //¿ª¶¨Ê±Æ÷ÖÐ¶Ï
 116   1          EA=1;       //¿ª×ÜÖÐ¶Ï                                                                               
C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 3   

 117   1      
 118   1      }
 119          //-----------------------------------------------------------------------
 120          int ABS(int i)    //¾ø¶ÔÖµº¯Êý
 121          {
 122   1          if (i>=0) return i;
 123   1          else return -i;
 124   1      }
 125          //-----------------------------------------------------------------------
 126          void getposition(void)//Ç°Ãæ9¸öºìÍâ¶Ô¹Ü£¬Ò²¿ÉÒÔ½áºÏ×Ô¼ººìÍâ¶Ô¹Ü¸öÊýºÍÅÅ²¼×ÔÐÐÁ¿»¯Æ«²î
 127          {
 128   1             
 129   1                 P2H=(P2&0xff);//´Ó×óµ½ÓÒ1-8¸öºìÍâ¶Ô¹Ü×´Ì¬£¬¾­µçÑ¹±È½ÏÆ÷ºóÒÀ´ÎÁ¬P2.7-P2.0
 130   1                 P2H=(P2H<<1);//×óÒÆÒ»Î»
 131   1                 P2H=P2H+(P1&0x80);//½«×óÒÆÒ»Î»ºóµÄÖµ°´Î»ÓëÉÏ´Ó×óµ½ÓÒµÚ9¸öºìÍâ¶Ô¹Ü(¾­µçÑ¹±È½ÏÆ÷ºóÁ¬½ÓÖÁP1.7)µÄÖµ£¬P1&0x
             -80ÊÇ½«P1¿ÚµÄ×î¸ßÎ»È¡³ö 
 132   1                 //P2H=001000000      ;//ÎÒ×Ô¼º¼ÓµÄ²âÊÔÒ»ÏÂÎÒµ¥Æ¬»úµÄ½Ó¿ÚÊÇ·ñ»µÁË¡£
 133   1             switch(P2H&0x1ff)//×îÖÕP2HµÄµÍ¾ÅÎ»£¬Ã¿Ò»Î»µÄ×´Ì¬´ú±íÁËÇ°ÃæºìÍâ¶Ô¹ÜÕÕµ½ºÚÏßÉÏµÄÇé¿ö£¬
 134   1                 //¾­µçÑ¹±È½ÏÆ÷Êä³ö¸ßµçÆ½´ú±íÏÂ·½ÎªºÚÏß(¶ÔÓ¦ÄÇÒ»Î»Îª1)£¬ÕÕÔÚ°×É«ÅÜµÀÉÏÎªµÍµçÆ½(¶ÔÓ¦ÄÇÒ»Î»Îª0)
 135   1                  {
 136   2                      case 0x100: error=-12;worse/=2;    break;
 137   2                      case 0x180: error=-11;worse/=2;    break;
 138   2                      case 0x080: error=-9;worse/=2;    break;
 139   2                      case 0x0c0: error=-7;worse/=2;    break;                
 140   2                      case 0x040: error=-5;worse/=2;    break;          //left
 141   2              case 0x060: error=-3;worse/=2;    break;                                                
 142   2                      case 0x020: error=-2;worse/=2;     break;                               
 143   2                      case 0x030: error=-1;worse/=2;     break;
 144   2                      
 145   2                                  
 146   2              case 0x010: error=0;worse/=2;     break;
 147   2                      
 148   2                                
 149   2              case 0x018: error=1;worse/=2;     break;            
 150   2              case 0x008: error=2;worse/=2;     break;           
 151   2              case 0x00c: error=3;worse/=2;     break;                  
 152   2              case 0x004: error=5;worse/=2;     break;              
 153   2              case 0x006: error=7;worse/=2;     break;       // right
 154   2              case 0x002: error=9;worse/=2;     break;            
 155   2              case 0x003: error=11;worse/=2;     break;             
 156   2              case 0x001: error=12;worse/=2;    break;           
 157   2      
 158   2                      case 0x000: error=error_history[ERROR_HISTORY_NUM-1];break;       //000000000 0x000  
 159   2              default: error=error_history[ERROR_HISTORY_NUM-1];worse++; break;    //ÆäËûÇé¿öÊ±£¬±£³ÖÉÏÒ»´ÎÆ«²î
 160   2                      }
 161   1       //worse±íÊ¾´íÎóÐÅºÅ£¬µ±³öÏÖ0x000»òÕßÆäËûÇé¿öÐÅºÅÊ±£¬
 162   1       //±íÊ¾ÐÅºÅ²»Õý³£,ÀÛ¼Ó¼ÆÊý£¬´ïµ½Ò»¶¨ÊýÁ¿Ê±¿ÉÒÔÈÏ¶¨³µÒÑ¾­³ö½ç£¬Áîµç»ú×ªËÙÎª0£¬±ÜÃâ×²»µ
 163   1      } 
 164          
 165              
 166          void servo_control(void) //¶æ»ú¿ØÖÆ
 167          {
 168   1          char i=0;
 169   1      
 170   1          if(ABS(error-error_history[4])>=11) //Èç¹ûÁ½´ÎµÄÆ«²î¹ý´ó£¬Ôò±£³ÖÉÏÒ»´ÎµÄÆ«²î
 171   1              error=error_history[4];      //·ÀÖ¹²»È·¶¨Çé¿ö£¨ÈçºìÍâ¹Ü³å³öÅÜµÀ£©Ôì³ÉµÄÆ«²îÌø±ä
 172   1          //¸ù¾ÝÆ«²î¼ÆËã¶æ»ú½Ç¶ÈÊä³ö
 173   1           servo_PWM = servo_middle+(servo_P*error    //±ÈÀý
 174   1                         + servo_D*(error-error_history[4])//Î¢·Ö
 175   1                    )/10;   //ÕâÀïÊ¹ÓÃ³ËÒÔÒ»¸ö´óµÄÏµÊýÔÙ³ýÒÔÒ»¸öÊýµÄ·½·¨
 176   1                             //½«Ð¡Êý¼ÆËã×ª»»³ÉÕûÊý¼ÆËã£¬Èç*0.1¿É×ª»»Îª*10/100¡£ÒÔ¼õÇáµ¥Æ¬»úµÄ¸ºµ£
 177   1        //servo_PWM  =100     ;
C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 4   

 178   1        //servo_PWM= servo_middle+(servo_P*error    //±ÈÀý
 179   1            //             + servo_D*(error-error_history[4]-50)//Î¢·Ö
 180   1             //      )/3;   //ÕâÀïÊ¹ÓÃ³ËÒÔÒ»¸ö´óµÄÏµÊýÔÙ³ýÒÔÒ»¸öÊýµÄ·½·¨
 181   1                             //½«Ð¡Êý¼ÆËã×ª»»³ÉÕûÊý¼ÆËã£¬Èç*0.1¿É×ª»»Îª*10/100¡£ÒÔ¼õÇáµ¥Æ¬»úµÄ¸ºµ£
 182   1      
 183   1      
 184   1        // if(servo_PWM<95)      //ÏÞ·ù
 185   1                               if(servo_PWM<40)      //ÏÞ·ù
 186   1          //    servo_PWM=95;     //·ÀÖ¹¶æ»ú³¬¹ý¼«ÏÞÖµ
 187   1                              servo_PWM=40;     //·ÀÖ¹¶æ»ú³¬¹ý¼«ÏÞÖµ
 188   1         // if(servo_PWM>165)
 189   1               if(servo_PWM>200)
 190   1           //   servo_PWM=165;
 191   1                       servo_PWM=200;
 192   1        for(i=0;i<ERROR_HISTORY_NUM-1;i++)    //¼ÇÂ¼Æ«²î
 193   1          {
 194   2              error_history[i]=error_history[i+1];
 195   2          }
 196   1          error_history[ERROR_HISTORY_NUM-1]=error;
 197   1      
 198   1      }
 199          
 200          
 201          
 202          void motor_control(void) //µç»ú¿ØÖÆ
 203          {
 204   1          left_motor_PWM=speed_expect;   //ËÙ¶È¿ØÖÆ
 205   1          right_motor_PWM=speed_expect;  //¿ÉÒÔÖ±½Ó¸ø¶¨£¬Ò²¿ÉÒÔ¸ù¾ÝÈüµÀÇé¿ö¼ÆËãµÃ³ö
 206   1      
 207   1              if(worse>=30)//Ç°Ãæ´«¸ÐÆ÷ÐÅºÅ²»Õý³££¬ÀÛ¼ÆN´ÎÅÐ¶¨Îª³å³öÅÜµÀ£¬·ÀÖ¹³µ×²»µ£¬µç»úËÙ¶È¸ø0               //worseÐèÒª¼Ó´ó£¡£
             -¡£¡£¡£¡
 208   1              {
 209   2              left_motor_PWM=0;
 210   2          right_motor_PWM=0;
 211   2              }
 212   1              
 213   1               
 214   1          if(left_motor_PWM>MOTOR_MAX_PWM_COUNT)   //ÏÞ·ù
 215   1              left_motor_PWM=MOTOR_MAX_PWM_COUNT;
 216   1          if(left_motor_PWM<0)
 217   1              left_motor_PWM=0;
 218   1      
 219   1          if(right_motor_PWM>MOTOR_MAX_PWM_COUNT)
 220   1              right_motor_PWM=MOTOR_MAX_PWM_COUNT;
 221   1          if(right_motor_PWM<0)
 222   1              right_motor_PWM=0;
 223   1      }
 224          
 225          void flash_store()//Ïà¹ØÐÞ¸Ä²ÎÊýÐ´Èëflash±£´æÆðÀ´£¬·½±ãµ÷ÊÔ,Ïà¹Øº¯Êý¼ûflash.c
 226          {
 227   1      del(0x00,0x00);//½«ÉÈÇø³õÊ¼»¯
 228   1      delay_ms(5);
 229   1      write(0x00,0x00,servo_P);
 230   1      delay_ms(5);
 231   1      write(0x00,0x01,servo_D);
 232   1      delay_ms(5);
 233   1      write(0x00,0x02,servo_middle);
 234   1      }
 235          //-----------------------------------------------------------------------
 236          void main(void)
 237          {       
 238   1          sys_init();
C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 5   

 239   1          LCD_init();
 240   1              pre_show();
 241   1          P1=0xff;
 242   1              /*
 243   1              while(end)
 244   1          {
 245   1              KeyScan();
 246   1                      pre_show();
 247   1                      if(~end)  //Èç¹û¼ì²âµ½µÍµçÆ½£¬ËµÃ÷°´¼ü°´ÏÂ
 248   1           {
 249   1               LCD_DLY_ms(10);   //ÑÓÊ±È¥¶¶£¬Ò»°ã10-20ms
 250   1             if(~end)     //ÔÙ´ÎÈ·ÈÏ°´¼üÊÇ·ñ°´ÏÂ£¬Ã»ÓÐ°´ÏÂÔòÍË³ö
 251   1                   {
 252   1              while(~end);//Èç¹ûÈ·ÈÏ°´ÏÂ°´¼üµÈ´ý°´¼üÊÍ·Å£¬Ã»ÓÐÊÍ·ÅÔòÒ»Ö±µÈ´ý
 253   1              end=0;
 254   1                       }
 255   1                }
 256   1               flash_store();
 257   1      
 258   1          }                             */
 259   1          while(1)
 260   1          {   
 261   2                  
 262   2              getposition();  //ÅÐ¶ÏºÚÏßÎ»ÖÃ
 263   2              servo_control();//¿ØÖÆ¶æ»ú
 264   2                      //servo_PWM=90;                                         //°ÑÉÏÃæÄÇ¸öÑ­»·×¢ÊÍµôÖ®ºóÕâ¸ö²Å¿ªÊ¼Æð×÷ÓÃ£¡£¡£¡£¡
 265   2                      motor_control();//¿ØÖÆµç»ú
 266   2              while(control_period_finished==0);  //µÈ´ý¿ØÖÆÖÜÆÚ20msµ½´ï,±£Ö¤Ã¿´Î¿ØÖÆµÄÊ±¼ä¼ä¸ô¶¼ÏàÍ¬
 267   2              {
 268   3                      control_period_finished=0; //±êÖ¾Î»ÇåÁã
 269   3                  }   
 270   2          }
 271   1      }
 272          
 273          void exint0() interrupt 0 //Íâ²¿ÖÐ¶Ï0²âËÙ,ÖÐ¶ÏºÅ0
 274          {
 275   1         T0count++;  
 276   1      }
 277          void exint1() interrupt 2 //Íâ²¿ÖÐ¶Ï1²âËÙ£¬ÖÐ¶ÏºÅ2
 278          {
 279   1         T1count++;  
 280   1      }
 281                          
 282          
 283          void TIME_BASE(void) interrupt 1 using 1   //¶¨Ê±Æ÷Éú³ÉPWM  //²»Çå³þµÄ¿ÉÒÔ²Î¿¼PWMµÄ¶¨Òå
 284          {
 285   1          TH0=T0_HIGH;        //¸³³õÖµ
 286   1          TL0=T0_LOW ;
 287   1      
 288   1          motor_PWM_counter++;  //¼ÆÊýÆ÷+1 ,Ã¿+1±íÊ¾10us
 289   1          servo_PWM_counter=servo_PWM_counter+1;
 290   1      
 291   1          if(motor_PWM_counter>100)   //PWM±È½Ï¡¢Éú³É
 292   1          {
 293   2              motor_PWM_counter=1; //´Ó1¿ªÊ¼¼ÆÊý
 294   2          }
 295   1          if(servo_PWM_counter>1010)   //PWM±È½Ï¡¢Éú³É
 296   1          {
 297   2      
 298   2              servo_PWM_counter=1; //´Ó1¿ªÊ¼¼ÆÊý
 299   2              control_period_finished=1;  //20ms¿ØÖÆÖÜÆÚµ½´ï£¬±êÖ¾Î»ÖÃ1£¬ÕâÀï½èÓÃÁË¶æ»ú¿ØÖÆÖÜÆÚ20ms£¨50Hz£©£¬
 300   2                                  //Èç¹û¸ü¸ÄÖ÷³ÌÐò¿ØÖÆÖÜÆÚ£¬¿É¶¨ÒåÒ»¸öÀàËÆÓÚservo_PWM_counterµÄ¼ÆÊýÆ÷¼ÆÊ±
C51 COMPILER V9.01   SMARTCAR                                                              11/10/2015 09:09:38 PAGE 6   

 301   2                  timecount++;
 302   2          }
 303   1      
 304   1          if(left_motor_PWM>=motor_PWM_counter)   //×óÓÒPWM
 305   1              LEFT_MOTOR_PWM_PORT=1;  //¶Ë¿ÚÊä³ö¸ßµçÆ½
 306   1          else
 307   1              LEFT_MOTOR_PWM_PORT=0;  //¶Ë¿ÚÊä³öµÍµçÆ½
 308   1      
 309   1      
 310   1          if(right_motor_PWM>=motor_PWM_counter)   //×óÓÒPWM
 311   1              RIGHT_MOTOR_PWM_PORT=1;  //¶Ë¿ÚÊä³ö¸ßµçÆ½
 312   1          else
 313   1              RIGHT_MOTOR_PWM_PORT=0;  //¶Ë¿ÚÊä³öµÍµçÆ½
 314   1      
 315   1          if(servo_PWM>=servo_PWM_counter)//¶æ»úPWM
 316   1              SERVO_PWM_PORT=1;
 317   1          else
 318   1              SERVO_PWM_PORT=0;
 319   1                      
 320   1              
 321   1      if(timecount>=5)//20ms*5=100ms£¬Ã¿100msÍ³¼ÆÒ»´ÎÂö³å¸öÊý 
 322   1          { 
 323   2           frequent=(T0count+T1count)/2;
 324   2           T0count=0;//ÖÃ0ÖØÐÂ¼ÆÊý
 325   2               T1count=0;//ÖÃ0ÖØÐÂ¼ÆÊý
 326   2           timecount=0;
 327   2          }
 328   1      }       
 329          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1009    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     41       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
